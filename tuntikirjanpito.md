# työaikakirjanpito

|    päivä    | aika  | mitä tein                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|:-----------:|:------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|    1.8.     | 5     | project basic setup (frontend packages, backend packages, docker dev setting, backend orm migration for user table, db connector, user account registration, basic routing, frontend redux setup, frontend to backend targeting)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    5.8.     | 9     | GCP setting deploy, docker compose build, trouble shooting, browser test for backend done                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|    6.8.     | 8     | nginx setup change, user_detail (user can have more than one children, later can be extended due to country code and each countries guide line of vaccination) & vaccine (Finnish guideline, but other country can be added) & history table migration, vaccine info data seed from information written in (https://rokote.fi/lapset/lasten-rokotusohjelma/), each userController user, user_detail table post method, get method vaccineController basic get method, historyController vaccination history save post method, basic get method, noticeController can return expected vaccination date                                                                                                                                                                                                                                                     |
|    8.8.     | 5     | login controller with JWT middleware for client and admin, added admin table, admin auth check to limit certain api, client can now only approach their own data due to jwt validation with endpoint target                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|    12.8.    | 2     | jwt payload property added, better security check for approaching api's ( checking children info data due to login JWT token), update token data when user who doesn't have any child data added child data, admin login doesn't have child data                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|             | 1.5   | added Korean Vaccination Plan data(https://www.immunize.org/wp-content/uploads/catg.d/p4019-09.pdf) seed, fixed notice Controller query, due to child's nationality, shows region appropriate vaccination plan data                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|             | 1.5   | user info update, check if email and nickname is already used before update (after login), change password (before login)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|             | 1     | user table modification (column is_active, last_login added to check soft delete, and late run hard delete with crontab), when login log last_login column and soft delete return user is_active become true again, user delete method (soft delete) added                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|    13.8.    | 1.5   | View routing added, Frontend Login and JWT cookie saving, Language change option ( Finnish, English, Korean ) and selected language cookie saving (default English)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|             | 3.5   | Added React Bootstrap and applied on frontend DOM partially, using JWT token cookie data decoded, approaching backend data to target endpoint, parsed return data and generate DOM contain returned information, backend returned data from get user/:id now return fetched row as object record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    14.8.    | 2     | Frontend Header, Footer separated, Header Added logout (unsetting cookie and navigate, reload), Language selection moved to Footer for better UI UX, UI translation for Header, Footer, /Main page shows basic data parsed DOM, Backend login will now return data in object record for detail unset user for easier approach for frontend                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|             | 3     | Frontend Child info register page added with language options, header menu to child registration added, header menu can be shown due to cookie, token property changed, Backend query modified for proper response data for adding child information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|             | 1.5   | Frontend parsed data handling modified (recognizable gender shown due to tiny int value), nationality shown as country name, date shown due to order of each language standard, while login / will not show login or join related, later will be updated to have links to approach other pages, deployed to GCP and tested if deployed environment frontend request target backend API properly and was successful. responsive UI was sloppy.                                                                                                                                                                                                                                                                                                                                                                                                             |
|    15.8     | 2     | Frontend logout will reload, logout will be shown only while login, Vaccination History page, Vaccination Recommendation Page, RegisterChild page parsed data visualize, Backend MySQL query string modification to easier read, notice controller, history controller fetching data columns changed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|             | 3     | Frontend saving vaccination record, due to Language option, birthdate and expected vaccination date order looks differently, logout function went to util to be called each backend response situation, due to response status code 403, cookie expiration, without cookie information forcefully navigate to login page, deploy to GCP environment and test                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|    16.8     | 3.5   | GCP got attacked, main database was deleted and database RECOVER_YOUR_DATA was added, select * from RECOVER_YOUR_DATA returned message, (injection suspected), GCP db docker volume removed, rebuilt, backend contains injection prevention (checking injection string, checking number data get changed to string), later will check if get attacked again with security enhancement, attacker message : All your data is backed up. You must pay 0.0136 BTC to 1KnSqjepnu6vb1fosSm5JU6vkcguMSpUk4 In 48 hours, your data will be publicly disclosed and deleted. (more information: go to https://is.gd/dayuwi), After payment send mail to us: dzen+2y89j@onionmail.org and we will provide a link for you to download your data. Your DBCODE is: 2Y89J                                                                                                |
|             | 1     | Frontend bug fix (setting token cookie wasn't reflected when using token value before refresh, token decoder fixed), Backend provide additional token property response                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|             | 0.5   | Frontend UI adjust, css adding (inline style removal), removed console log of response not to expose data structure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|    17.8     | 1     | Frontend UI Main page Responsive design applied (3 depth with media query), modified to HTML tag with class, css added, Backend server break when approaching vaccine API without param got fixed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|             | 2.5   | Frontend UI History, Notice page Responsive design applied with HTML structure changed for better UI UX (Notice page still need to be done more), Main page responsive ,common part of each page css media query removed and written once in common, Header toggle appear after login                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|    19.8     | 3     | Frontend UI Main, History, Notice page UI translation, Notice page HTML structure changed, responsive design applied                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|             | 1     | Frontend UI responsive style applied on Register Child page, Main page UI for newly join user improved, Redux for Error or Instructional message added, Header will now show pop up message using redux, when login failed (backend response)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|    20.8     | 2     | Frontend UI Error & Instructive popup message with Redux in Header, styling, JWT expiration pre-warning T - 10 minutes popup message and forced expiration logout when JWT expired added with redux.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|             | 2.5   | Backend recognizable error type added for frontend, each controllers provided for each conditions code, child info registration check parameter checking fixed, Frontend each response for error, success popup message added, each message have translation returned due to error code, unusual approach (fixing query param related to child data in notice page) will be treated forceful logout                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|    21.8     | 5     | Frontend UI popup message added for success of registering vaccination history, added translation for notice page ,fixed wrongly typed variable name, header will stay constantly on top side of app, header nav to account setting added (info change, password change, deactivate account), popup message text aligned to left, account setting page added with translations for UI, Backend controller for user information update refactored                                                                                                                                                                                                                                                                                                                                                                                                          |
|    22.8     | 3     | Frontend UI account setting page HTML structure changed, responsive CSS applied, for password change seeing password toggle added, when account setting category changed all input cleaned up, wrongly delivered variable fixed, wrongly called function deleted                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|             | 3     | Frontend changing email or nickname in account setting page give proper request value, header shows different menus between admin and users, admin login & join page added, admin main page api request, Backend fixed to proper checkup of string values when frontend make request, modified to getting all user info as admin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    26.8     | 4     | Frontend admin main page data parsing, HTML structure, translation, basic styling, wrongly typed letter fixed, Backend controller for admin page request updated on query to fetch more columns to use                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|             | 2     | Frontend admin main page responsive design styling, proper redirection for each user and admin when logout, admin top menu added, Backend user_detail record(child information and related vaccination history) delete api added                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    27.8     | 1.5   | Frontend from history page, can delete child record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|    28.8     | 3     | Frontend history page refactored and added new features that user can update & delete single vaccination history record, Backend update and delete method for single vaccination history                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|             | 2.5   | Frontend main page filtering with string and select option values (filtering with combinations), styling on filter                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|    29.8     | 2     | Frontend admin main page filtering with string and select option values (string values, gender, nationality, account activation)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    31.8     | 2     | Frontend history page child information update added, minor UI change related footer area covering contents, Backend child information update method added, number type checker for injection defend refactored (for null, undefined field to be passed), injection check target character added                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|     1.9     | 3.5   | Frontend child registration and filtering contains USA related values, main page rendering nothing when doesn't have child (child registration instruction) after adding filter function fixed(useRef changed to using useState) Backend usa vaccination guide seed data added reference from USA CDC(https://www.cdc.gov/vaccines/hcp/imz-schedules/child-adolescent-age.html), migration for vaccination table data type changed from tiny int to int                                                                                                                                                                                                                                                                                                                                                                                                   |
|     2.9     | 2.5   | Backend bbs (board, reply) table migration added, controller added (getting written posts, writing post, getting post and related reply, writing reply) and  abstract declaration of put, delete method in board controller                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|             |       | Missing Commit (migration files)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|             | 2     | Frontend request bbs and visualize response with prototype styling (10 posts each pagination, 10 * n pagination and prev, next button), Backend board controller get method fix to use query parameter                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     3.9     | 2     | Backend bbs basic get modified to use where clause for frontend request (searching function) Frontend bbs searching function added based on writer nickname, title, text, reply text. writing post function added                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|             | 2     | Backend to fix query to duplicate key on frontend of board.id related join on reply foreign key. Frontend bbs post info fetching function (include original post and replies ) to watch post and reply, clicked post highlight                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|     4.9     | 1.5   | Frontend bbs reading post UI (original post and replies), writing reply function added                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|             | 2     | Backend deleting post, deleting reply function added, Frontend request for deleting post, reply function attached, UI fixed to 5 pagination (reduced from 10 pagination to fit mobile UI)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|     5.9     | 5     | Backend board put methods added, typo fixed on user controller, Frontend bbs editing post, reply function attached, HTML structure and responsive UI fixed for better mobile view on board page.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|     7.9     | 1     | Backend bugfix error when search keyword is empty string, Frontend modified UI for stability on Backend where clause, now search select option basic is title, fixed horizontally overflowed UI                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|     9.9     | 2     | Frontend Material UI added, header refactored to use MUI                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|             |       | Frontend Header Bug Fix                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|             | 2     | Frontend about page add ( site instruction )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|             | 2     | Backend added new function on login controller to extend forced logout time and refresh JWT, Frontend header have new menu on setting, to extend forced logout time to another hour and set new JWT data as cookie, timer got modified to remove previous timeout and run new timer after renew JWT cookie                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|             |       | Frontend setting menu order change                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|    10.9     | 1.5   | Backend JWT cookie forgery prevention added with new columns jwt_token, jwt_expires_at on user, admin tables with updated migrations and middleware check valid token value as it generated when login, added child data, renew jwt authentication. Frontend now shows detail error message about JWT related errors                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|             | 1.5   | Backend bugfix on login controller jwt renew and middleware to check admin table, not only user table, token string injection check added, admin post, reply delete function added on admin controller, is_admin column added on board and reply tables, board controller now return value of is_admin column for frontend admin activity UI, is_admin value is included when write post or reply, Frontend main page will now check and redirect when doesn't have admin value, board page post and reply deletion function added for admin which doesn't require writer's id                                                                                                                                                                                                                                                                            |
|             | 2     | Backend refactored user controller method moved to admin controller (get all user info as admin) and new feature added to contain counts of post, reply written by user Frontend admin main page redirect unauthorized user to more proper page, function added to shows counts of user's posts, replies, now when user write post and reply input field get cleaned up                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|    11.9     | 2     | Backend node cron added, check deactivated user haven't login over 6 months and delete vaccination histories, children data, user data (post and reply remains)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|             | 1     | Backend board controller refactored to fix problem not fetching post written by withdraw user, Frontend board page now shows writer as admin when post and reply is written by admin, post and reply written by withdraw user shows writer as withdraw user                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|             | 2     | Backend injection prevention method changed to alter string value to certain matching patterns, it limit less of user input but still to prevent injection, check date format added, refactored user controller and login controller to use new injection prevention, login, join, child data add, basic information get refactored                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|    12.9     | 3     | Backend injection prevention method replaced, Frontend backend error code modified                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|             |       | Backend date type check return value bugfix                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|    14.9     | 1     | Backend nationality data checked more tightly only with certain string values, history controller now return child information Frontend history page now use child information for easier child information modification UI and vaccination date is set on vaccination date update UI                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|    16.9     | 3.5   | CI/CD github action flow for automated deployment to GCP (github action gcp deploy test 1-8), simple test added to check test result and deploy (github action flow test and deploy to gcp test 1-4)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|             | 1     | Frontend login page UI added when after login and move to previous page history ( with cookie data set, nothing shown ), header brand click now navigate to login page                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|    17.9     | 2.5   | Frontend client login join  page doesn't navigate to main page, will show login client menus, minor responsive style fixed, Backend login user IP record added, attacking client ip record table added ( attack count added each trying ) applied to JWT forgery and user controller methods                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|             | 2     | Backend log column added on hostile_list table, hostile request logging added on each controller                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    18.9     | 5     | Backend admin main page get response method typo fixed, due to parsing failure, refactored logging ( saved as json array ), injection checking methods refactored to check type, Frontend admin hostile page added and basic log parsing done                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|    19.9     | 3.5   | Backend admin hostile list now provide paging, searching, if log is checked and whitelisted by admin, whitelisted or banned IP address will not stack log, ban check added (after checking log and ban on firewall) Frontend paging and keyword searching added on admin hostile page, whitelisting, ip ban check added, simple styling added                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|    20.9     | 1     | Frontend notice page refactored more 12 months of month periodical recommended date now to be shown year and months for better UX                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|             | 2.5   | Backend fix to return proper error when history page request get method without record, board and admin hostile got fixed to return proper pagination counter, admin page hostile ip list now can response based on frontend is_banned, is_whitelist request, Frontend history page shows proper message when there is no record, admin hostile page checkboxes added for filtering, when whitelist, ban toggle, if pagination count changes and current page number isn't matched, current page become first of pagination, admin hostile page styling for checkbox side                                                                                                                                                                                                                                                                                 |
|    21.9     | 1     | Frontend admin hostile page translation added, styling adjusted , swedish translation added for all frontend pages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|             | 2     | Backend when hostile suspect is already banned or whitelisted log not get added, token interface fixed to reduce token string, when there are many children info, it's over frontend cookie maximum size and over req.headers['authorization'] maximum size, which isn't properly set cookie or deliver authorization, Frontend authentication error fixed after registered many children and cookie size overflow while test hostile suspect whitelist ban function with injection string, cookie got replaced to local storage for bigger data of JWT value as solution of cookie size limit, but backed to use cookie again after read (https://www.pivotpointsecurity.com/local-storage-versus-cookies-which-to-use-to-securely-store-session-tokens/#Conclusion) and reduced backend JWT return since couldn't enlarged req.headers['authorization'] |
|    23.9     | 2     | Backend stacked log for whitelisted, banned ip removing with scheduling added, admin email, nickname, password change function added, due to new function added, user controller information update function also return unified error code with admin controller, Frontend login function modified when admin logout common page between user, now will redirect admin login join page, admin account setting now check admin secret, if admin account deactivation not showing, register child page link isn't exposed anymore to admin                                                                                                                                                                                                                                                                                                                 |
|             | 1.5   | Backend user_detail, vaccine table modified to user national code as int, country table added with country seed data. vaccine seed data national code changed to int value, national code check security function removed. Frontend national code related code fix to use number instead of string.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|             | 1.5   | Backend return country name as way it called by native, prototype admin data manage get method added. Frontend now shows nationality as native way without checking national code, admin page country and vaccine data modification is on working.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|    24.9     | 3     | Backend temp_country, temp_vaccine table added, temp country add function added, admin manage get function now return existing country property to compare and request adding temp country data. Frontend input options and abstract button functions added with conditions to appear buttons and inputs, temporal country adding function added, CountryVaccineDataResponse property got fixed to fetch after develop temporal countries list.                                                                                                                                                                                                                                                                                                                                                                                                           |
|    24.9     | 2.5   | Backend admin manage get fixed to return existing countries, temporal countries, existing vaccine names, temporal vaccines. update delete function for temporally added country, create function for temporal vaccine information added. Frontend interface updated for additional features, update, delete for temporal country info, create for temporal vaccine info added.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|    25.9     | 3.5   | Backend admin manage get method temporal vaccine fetch query modified, temporal vaccine update function added. Frontend temporal vaccine related UI and styling added, temporal vaccine update function added.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|             | 2     | Backend admin manage delete method for temporal vaccine data added. Frontend temporal vaccine data deletion added, UI fixed for better UX on admin manage page ( none responsive admin page )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|    26.9     | 3     | Prod Build Deploy Test 1 ~ Dev Deploy Test 2 , was able to deploy production build, but react bootstrap didn't applied unlike dev version works well on deployed version whole time. so finishing it as deploying dev version. if need to check production build I can commit push again of production build lacking work of react bootstrap                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|             |       | Unused reference removed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|    4.10     | 7.5   | Frontend Fix nested component to independent component to be imported                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|             | 0.5   | Frontend eslint, prettier applied                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 4.10 - 5.10 | 4.5   | Backend eslint setup trouble shooting, eslint, prettier applied                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|    5.10     | 0.5   | Frontend eslint inline ignore added and added dependency array back for empty useEffect dependency array to fix malfunctioning on client main page, admin main page, child information update page                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|             | 0.5   | Backend vaccine information providing api fixed to check parameter and save log properly                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|     yht     | 191.5 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
